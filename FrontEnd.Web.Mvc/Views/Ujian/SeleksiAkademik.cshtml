@model SeleksiAkademikModel
@*Content*@
@if (Model.ListPertanyaan.Count() < 1)
{
    <p>Soal kosong hubungi admin</p>
}
else
{
    int i = 0;
    <div class="row">
        <div class="col-lg-9">
            <form asp-controller="Test" asp-action="Seleksi" method="post">
                @foreach (var pertanyaan in Model.ListPertanyaan)
                {
                    <div class="card shadow mb-4 d-none" id="pertanyaan@(i+1)">
                        <div class="d-block card-header py-3">
                            <h5 class="m-0 font-weight-bold text-primary">Pertanyaan @(i + 1)</h5>
                        </div>
                        <div class="card-body">
                            <div class="border-bottom mb-2">@Html.Raw(pertanyaan.Pertanyaan)</div>
                            <div class="border-bottom mb-2">
                                <input hidden asp-for="ListPertanyaan[i].PertanyaanId" value="@pertanyaan.PertanyaanId" />
                                <input hidden asp-for="ListPertanyaan[i].SoalId" value="@pertanyaan.SoalId" />
                                <div class="radio">
                                    <input type="radio" class="mr-2" value="A" asp-for="ListPertanyaan[i].JawabanCalonSiswa" />
                                    A. @pertanyaan.OpsiA
                                </div>
                                <div class="radio">
                                    <input type="radio" class="mr-2" value="B" asp-for="ListPertanyaan[i].JawabanCalonSiswa" />
                                    B. @pertanyaan.OpsiB
                                </div>
                                <div class="radio">
                                    <input type="radio" class="mr-2" value="C" asp-for="ListPertanyaan[i].JawabanCalonSiswa" />
                                    C. @pertanyaan.OpsiC
                                </div>
                                <div class="radio">
                                    <input type="radio" class="mr-2" value="D" asp-for="ListPertanyaan[i].JawabanCalonSiswa" />
                                    D. @pertanyaan.OpsiD
                                </div>
                                @if (pertanyaan.OpsiE != null)
                                {
                                    <div class="radio">
                                        <input type="radio" class="mr-2" value="E" asp-for="ListPertanyaan[i].JawabanCalonSiswa">
                                        E. @pertanyaan.OpsiE
                                    </div>
                                }
                            </div>
                            <div class="row">
                                <div style="text-align: left;" class="col-6">
                                    @if (i != 0)
                                    {
                                        <a href="#pertanyaan@(i)" class="btn btn-info text-white">Sebelumnya</a>
                                    }
                                </div>
                                <div style="text-align:right;" class="col-6">
                                    @if (i != Model.ListPertanyaan.Count() - 1)
                                    {
                                        <a href="#pertanyaan@(i+2)" class="btn btn-info text-white">Selanjutnya</a>
                                    }
                                    else
                                    {
                                        <button class="btn btn-info text-white" type="submit">Submit</button>
                                    }
                                </div>
                            </div>
                        </div>
                    </div>
                    i++;
                }
            </form>
        </div>

        @*SideMap*@
        <div class="col-lg-3">
            <div class="card shadow mb-4">
                <div class="card-header py-3">
                    <h6 style="text-align:center" id="sisaWaktu"
                        class="m-0 font-weight-bold text-dark">
                        00:00:00
                    </h6>
                </div>
                <div class="card-body row">
                    @for (int j = 0; j < Model.ListPertanyaan.Count(); j++)
                    {
                        <a href="#pertanyaan@(j+1)" class="col-3">@(j + 1)</a>
                    }
                </div>
            </div>
        </div>
    </div>
}

@section Scripts {
    <script>
        $(document).ready(function () {
            $('#pertanyaan1').removeClass('d-none');
        });
    </script>
    <script>
        var sisaWaktu = 2 * 60;
        var detikCounter = sisaWaktu % 60;

        function StartTicking() {
            if (parseInt(sisaWaktu / 60) < 5) {
                $('#sisaWaktu').removeClass('text-dark').addClass('text-danger');
            }
            document.getElementById('sisaWaktu').innerText =
                FormatWaktu(parseInt(sisaWaktu / (60 * 60)), parseInt(sisaWaktu / 60), detikCounter);

            // Tik
            var _tick = setInterval(function () {
                if (detikCounter < 1)
                    detikCounter = 60;

                sisaWaktu = sisaWaktu - 1;
                detikCounter = detikCounter - 1;

                document.getElementById('sisaWaktu').innerText =
                    FormatWaktu(parseInt(sisaWaktu / (60 * 60)), parseInt(sisaWaktu / 60), detikCounter);

                if (parseInt(sisaWaktu / 60) < 5) {
                    $('#sisaWaktu').removeClass('text-dark').addClass('text-danger');
                }

                if (sisaWaktu == 0) {
                    PaksaSubmit();
                }
            }, 1000)
        }
        function FormatNumber(number) {
            if (number < 10)
                return '0' + number;
            else
                return number;
        }
        function FormatWaktu(jam, menit, detik) {
            var format = FormatNumber(jam) + ":" + FormatNumber(menit) + ":" + FormatNumber(detik);
            return format;
        }
        function PaksaSubmit() {

        }

        StartTicking();
    </script>
}